$(document).ready(function(){
/** 左侧导航响应 **/
	$(".user-main .main-left ul a#li_1").click(function(){
		$("div#rightcontent1").removeClass("xiaoshi");
		$("div#rightcontent2").addClass("xiaoshi");
		$("div#rightcontent3").addClass("xiaoshi");
		$("div#rightcontent4").addClass("xiaoshi");
		$("div#rightcontent5").addClass("xiaoshi");
		$(".user-main .main-left ul li a").removeClass("a_active");
		$("a#li_1").addClass("a_active");
	});
	
	$(".user-main .main-left ul a#li_2").click(function(){
		$("div#rightcontent2").removeClass("xiaoshi");
		$("div#rightcontent1").addClass("xiaoshi");
		$("div#rightcontent3").addClass("xiaoshi");
		$("div#rightcontent4").addClass("xiaoshi");
		$("div#rightcontent5").addClass("xiaoshi");
		$(".user-main .main-left ul li a").removeClass("a_active");
		$("a#li_2").addClass("a_active");
	});

	$(".user-main .main-left ul a#li_3").click(function(){
		$("div#rightcontent3").removeClass("xiaoshi");
		$("div#rightcontent1").addClass("xiaoshi");
		$("div#rightcontent2").addClass("xiaoshi");
		$("div#rightcontent4").addClass("xiaoshi");
		$("div#rightcontent5").addClass("xiaoshi");
		$(".user-main .main-left ul li a").removeClass("a_active");
		$("a#li_3").addClass("a_active");
	 
	});
	
	$(".user-main .main-left ul a#li_4").click(function(){
		$("div#rightcontent4").removeClass("xiaoshi");
		$("div#rightcontent1").addClass("xiaoshi");
		$("div#rightcontent2").addClass("xiaoshi");
		$("div#rightcontent3").addClass("xiaoshi");
		$("div#rightcontent5").addClass("xiaoshi");
		$(".user-main .main-left ul li a").removeClass("a_active");
		$("a#li_4").addClass("a_active");
 
	});

		$(".user-main .main-left ul a#li_5").click(function(){
		$("div#rightcontent5").removeClass("xiaoshi");
		$("div#rightcontent1").addClass("xiaoshi");
		$("div#rightcontent2").addClass("xiaoshi");
		$("div#rightcontent3").addClass("xiaoshi");
		$("div#rightcontent4").addClass("xiaoshi");
		$(".user-main .main-left ul li a").removeClass("a_active");
		$("a#li_5").addClass("a_active");
	 
	});

		$(".user-main .main-left ul a#li_6").click(function(){
		$("div#rightcontent6").removeClass("xiaoshi");
		$("div#rightcontent1").addClass("xiaoshi");
		$("div#rightcontent2").addClass("xiaoshi");
		$("div#rightcontent3").addClass("xiaoshi");
		$("div#rightcontent4").addClass("xiaoshi");
		$(".user-main .main-left ul li a").removeClass("a_active");
		$("a#li_6").addClass("a_active");
	 
	});

		$(".user-main .main-left ul a#li_7").click(function(){
		$("div#Fyfabu").addClass("xiaoshi");
		$("div#resetPwddom").addClass("xiaoshi");
		$("div#first-page").addClass("xiaoshi");
		$("div#myFabu").addClass("xiaoshi");
		$("div#personal_info").removeClass("xiaoshi");
		$(".user-main .main-left ul li a").removeClass("a_active");
		$("a#li_7").addClass("a_active");
	 
	});

 /**当搜索框为空回复全部列表**/
	$("div.hasList").click(function(){
			if(($("input#table_search").val())==""||($("input#table_search").val())==" "){
	  		$("table tbody tr").show();
	  	}
	 });
	  
	 
	/**表格搜索**/
		
     $('#search-bt').click(function(){
        var sstxt=$('#table_search').val();
        $("table tbody tr")
              .hide()
              .filter(":contains('"+sstxt+"')")
              .show();
   		  
       return false;
 	 });

 	  


 	  /**unfinished**/
 

 	 /** **/ 
 	 $("a#logout").click(function(){
 	 	if(confirm("确定退出吗？")){
 	 		location.href="login.html";
 	 	}
 	 	else{
 	 		return false;
 	 	}
 	 });


 	 /** 修改名字 **/
 	 $("a.nameSubmit").click(function(){
 	 	var new_name = $("input.nickName").val();
 	 	$("div.user-name").text("欢迎你,"+new_name);
 	 	$("#welcome_username").text(new_name);
 	 });
 	 var objUrl;
 	 /** upload pic **/
 	 $("#file0").change(function(){
	 objUrl = getObjectURL(this.files[0]) ;
	console.log("objUrl = "+objUrl) ;
	if (objUrl) {
		$("#img0").attr("src", objUrl) ;
	}
}) ;
	//建立一個可存取到該file的url
	function getObjectURL(file) {
		var url = null ; 
		if (window.createObjectURL!=undefined) { // basic
			url = window.createObjectURL(file) ;
		} else if (window.URL!=undefined) { // mozilla(firefox)
			url = window.URL.createObjectURL(file) ;
		} else if (window.webkitURL!=undefined) { // webkit or chrome
			url = window.webkitURL.createObjectURL(file) ;
		}
		return url ;
	}
	/** change logo of main-left**/
	$("div#updatePortrait span.sucServer").click(function(){
		$(".user-main .main-left .name img").attr("src",objUrl);
	});
 	/** 解决搜索时按分页按钮切换 **/
	 $(".field").change(function(){  
                    if(($("input.field").val())!=""){
                        if((($("input.field").next())[0].tagName)=="BUTTON"){
                         $("input.field").after("<span>123</span>");
                        }
                        else{
                         return false;
                        }
                    }
                      if(($("input.field").val())==""){
                    	if((($("input.field").next())[0].tagName)=="SPAN"){
                         $(".check_wrap .form-group span").remove();
                        }
                    }
               });
	 /** 修改密码ajax**/
	 $("#user_pwd .actSubmit").click(function(){
	 	if(($("input#password1").val())==($("input#password2").val())){
	 		$.post("/agent/modify_password",{'oldPassword':$("input#password").val(), 'newPassword': $("input#password2").val()},function(result) {
	 			if(result.code == 200){
	 				alert("密码修改成功");
	 			}
	 			else{
	 				alert("密码修改失败");
	 			}
	 		},'json');
	 	}
	 	else{
	 		alert("请确认两次新密码输入一致");
	 	}
	 });
	 
	 /** 提交个人信息 **/
	 $("#user_personalInfo .personalInfo_wrap .lj-btn").click(function(){
	 	$.post('/agent/modify_agent',{'name':$("input#username").val(),'sex':1,
	 		'age':$("input#age").val() == '' ? 0 : $("input#age").val(),'email':$("input#email").val(),
	 		'year':$("input#year").val() == '' ? 0 : $("input#year").val(),
	 		'company':$("input#company").val(),'phone':$("input#phone").val(),
	 		'introduction':$("textarea#selfIntro").val()},function(result){
	 			if(result.code == 200){
	 				alert("个人信息修改成功");
	 				$(".user-main .main-left .user-name span").text(result.agentEntity.name);

	 			}
	 			else{
	 				alert("个人信息修改失败");
	 			}
	 		},'json');
	 });
});


 
